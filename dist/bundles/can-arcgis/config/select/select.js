define("can-arcgis@1.0.0#components/select-widget/template.stache!steal-stache@3.1.3#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@3.2.5#can-view-import","can-stache-bindings@3.11.2#can-stache-bindings"],function(e,t,r){var a=t("components/select-widget/template.stache",[{tokenType:"start",args:["div",!1,1]},{tokenType:"attrStart",args:["class",1]},{tokenType:"attrValue",args:["workorder-picker container",1]},{tokenType:"attrEnd",args:["class",1]},{tokenType:"attrStart",args:["style",1]},{tokenType:"attrValue",args:["background:#fff;width:300px;padding:10px;",1]},{tokenType:"attrEnd",args:["style",1]},{tokenType:"end",args:["div",!1,2]},{tokenType:"chars",args:["\r\n    ",2]},{tokenType:"start",args:["p",!1,3]},{tokenType:"attrStart",args:["class",3]},{tokenType:"attrValue",args:["text-bold",3]},{tokenType:"attrEnd",args:["class",3]},{tokenType:"end",args:["p",!1,3]},{tokenType:"special",args:["title",3]},{tokenType:"close",args:["p",3]},{tokenType:"chars",args:["\r\n    ",3]},{tokenType:"special",args:["#if(selectGraphicsLayer.graphics.items.length)",4]},{tokenType:"chars",args:["\r\n        ",4]},{tokenType:"start",args:["p",!1,5]},{tokenType:"end",args:["p",!1,5]},{tokenType:"chars",args:["You've selected ",5]},{tokenType:"special",args:["selectGraphicsLayer.graphics.items.length",5]},{tokenType:"chars",args:[" features.\r\n            ",5]},{tokenType:"start",args:["button",!1,6]},{tokenType:"attrStart",args:["class",6]},{tokenType:"attrValue",args:["btn",6]},{tokenType:"attrEnd",args:["class",6]},{tokenType:"attrStart",args:["type",6]},{tokenType:"attrValue",args:["button",6]},{tokenType:"attrEnd",args:["type",6]},{tokenType:"attrStart",args:["on:el:click",6]},{tokenType:"attrValue",args:["clearSelected()",6]},{tokenType:"attrEnd",args:["on:el:click",6]},{tokenType:"end",args:["button",!1,6]},{tokenType:"chars",args:["Cancel",6]},{tokenType:"close",args:["button",6]},{tokenType:"chars",args:["\r\n        ",6]},{tokenType:"close",args:["p",7]},{tokenType:"chars",args:["\r\n        ",7]},{tokenType:"start",args:["ul",!1,8]},{tokenType:"attrStart",args:["class",8]},{tokenType:"attrValue",args:["menu",8]},{tokenType:"attrEnd",args:["class",8]},{tokenType:"end",args:["ul",!1,8]},{tokenType:"chars",args:["\r\n            ",8]},{tokenType:"comment",args:[" menu header text ",9]},{tokenType:"chars",args:["\r\n            ",9]},{tokenType:"start",args:["li",!0,10]},{tokenType:"attrStart",args:["class",10]},{tokenType:"attrValue",args:["divider",10]},{tokenType:"attrEnd",args:["class",10]},{tokenType:"attrStart",args:["data-content",10]},{tokenType:"attrValue",args:["Actions",10]},{tokenType:"attrEnd",args:["data-content",10]},{tokenType:"end",args:["li",!0,10]},{tokenType:"chars",args:["\r\n            ",10]},{tokenType:"comment",args:[" menu item ",11]},{tokenType:"chars",args:["\r\n            ",11]},{tokenType:"special",args:["#each(actions)",12]},{tokenType:"chars",args:["\r\n                ",12]},{tokenType:"start",args:["li",!1,13]},{tokenType:"attrStart",args:["class",13]},{tokenType:"attrValue",args:["menu-item",13]},{tokenType:"attrEnd",args:["class",13]},{tokenType:"end",args:["li",!1,13]},{tokenType:"chars",args:["\r\n                    ",13]},{tokenType:"start",args:["a",!1,14]},{tokenType:"attrStart",args:["href",14]},{tokenType:"attrValue",args:["#",14]},{tokenType:"attrEnd",args:["href",14]},{tokenType:"attrStart",args:["on:el:click",14]},{tokenType:"attrValue",args:["onActionClick(.)",14]},{tokenType:"attrEnd",args:["on:el:click",14]},{tokenType:"end",args:["a",!1,14]},{tokenType:"chars",args:["\r\n                        ",14]},{tokenType:"start",args:["i",!1,15]},{tokenType:"attrStart",args:["class",15]},{tokenType:"special",args:["iconClass",15]},{tokenType:"attrEnd",args:["class",15]},{tokenType:"end",args:["i",!1,15]},{tokenType:"close",args:["i",15]},{tokenType:"chars",args:[" ",15]},{tokenType:"special",args:["label",15]},{tokenType:"chars",args:["\r\n                    ",15]},{tokenType:"close",args:["a",16]},{tokenType:"chars",args:["\r\n                ",16]},{tokenType:"close",args:["li",17]},{tokenType:"chars",args:["\r\n            ",17]},{tokenType:"special",args:["/each",18]},{tokenType:"chars",args:["\r\n        ",18]},{tokenType:"close",args:["ul",19]},{tokenType:"chars",args:["\r\n    ",19]},{tokenType:"special",args:["else",20]},{tokenType:"chars",args:["\r\n\r\n        ",20]},{tokenType:"start",args:["select-field",!0,22]},{tokenType:"attrStart",args:["vm:properties:from",22]},{tokenType:"attrValue",args:["layerProperties",22]},{tokenType:"attrEnd",args:["vm:properties:from",22]},{tokenType:"attrStart",args:["vm:value:bind",22]},{tokenType:"attrValue",args:["layer",22]},{tokenType:"attrEnd",args:["vm:value:bind",22]},{tokenType:"end",args:["select-field",!0,22]},{tokenType:"chars",args:["\r\n\r\n        ",22]},{tokenType:"special",args:["#if(layer)",24]},{tokenType:"chars",args:["\r\n\r\n            ",24]},{tokenType:"start",args:["select-field",!0,26]},{tokenType:"attrStart",args:["vm:properties:from",26]},{tokenType:"attrValue",args:["queryProperties",26]},{tokenType:"attrEnd",args:["vm:properties:from",26]},{tokenType:"attrStart",args:["vm:value:bind",26]},{tokenType:"attrValue",args:["query",26]},{tokenType:"attrEnd",args:["vm:value:bind",26]},{tokenType:"end",args:["select-field",!0,28]},{tokenType:"chars",args:[" \r\n\r\n            ",28]},{tokenType:"special",args:["#if(query)",30]},{tokenType:"chars",args:["\r\n                ",30]},{tokenType:"special",args:["#eq(query, 'spatial')",31]},{tokenType:"chars",args:["\r\n                    ",31]},{tokenType:"start",args:["draw-widget",!0,32]},{tokenType:"attrStart",args:["view:from",32]},{tokenType:"attrValue",args:["view",32]},{tokenType:"attrEnd",args:["view:from",32]},{tokenType:"attrStart",args:["graphics:u:layer:bind",32]},{tokenType:"attrValue",args:["drawGraphicsLayer",32]},{tokenType:"attrEnd",args:["graphics:u:layer:bind",32]},{tokenType:"end",args:["draw-widget",!0,34]},{tokenType:"chars",args:["\r\n                    \r\n                    ",34]},{tokenType:"special",args:["#if(drawGraphicsLayer.graphics.items.length)",36]},{tokenType:"chars",args:["\r\n                        ",36]},{tokenType:"start",args:["button",!1,37]},{tokenType:"attrStart",args:["class",37]},{tokenType:"attrValue",args:["btn btn-primary",37]},{tokenType:"attrEnd",args:["class",37]},{tokenType:"attrStart",args:["on:el:click",37]},{tokenType:"attrValue",args:["searchGraphics",37]},{tokenType:"attrEnd",args:["on:el:click",37]},{tokenType:"end",args:["button",!1,37]},{tokenType:"chars",args:["\r\n                            ",37]},{tokenType:"start",args:["i",!1,38]},{tokenType:"attrStart",args:["class",38]},{tokenType:"attrValue",args:["esri-icon-search",38]},{tokenType:"attrEnd",args:["class",38]},{tokenType:"end",args:["i",!1,38]},{tokenType:"close",args:["i",38]},{tokenType:"chars",args:[" Search",38]},{tokenType:"close",args:["button",38]},{tokenType:"chars",args:[" \r\n                    ",38]},{tokenType:"special",args:["/if",39]},{tokenType:"chars",args:["\r\n                ",39]},{tokenType:"special",args:["else",40]},{tokenType:"chars",args:["\r\n                    ",40]},{tokenType:"start",args:["form-widget",!0,41]},{tokenType:"attrStart",args:["vm:is:u:saving:bind",41]},{tokenType:"attrValue",args:["formIsSaving",41]},{tokenType:"attrEnd",args:["vm:is:u:saving:bind",41]},{tokenType:"attrStart",args:["vm:fields:from",41]},{tokenType:"attrValue",args:["selectedQuery.fields",41]},{tokenType:"attrEnd",args:["vm:fields:from",41]},{tokenType:"attrStart",args:["vm:form:u:object:from",41]},{tokenType:"attrValue",args:["queryFormObject",41]},{tokenType:"attrEnd",args:["vm:form:u:object:from",41]},{tokenType:"attrStart",args:["on:vm:submit",41]},{tokenType:"attrValue",args:["searchFormSubmit(queryFormObject)",41]},{tokenType:"attrEnd",args:["on:vm:submit",41]},{tokenType:"attrStart",args:["on:vm:cancel",41]},{tokenType:"attrValue",args:["reset",41]},{tokenType:"attrEnd",args:["on:vm:cancel",41]},{tokenType:"end",args:["form-widget",!0,46]},{tokenType:"chars",args:["\r\n                ",46]},{tokenType:"special",args:["/eq",47]},{tokenType:"chars",args:["\r\n            ",47]},{tokenType:"special",args:["/if",48]},{tokenType:"chars",args:["\r\n        ",48]},{tokenType:"special",args:["/if",49]},{tokenType:"chars",args:["\r\n    ",49]},{tokenType:"special",args:["/if",50]},{tokenType:"chars",args:["\r\n",50]},{tokenType:"close",args:["div",51]},{tokenType:"done",args:[51]}]);return function(t,s,n){var o={module:e};return s instanceof r.Options||(s=new r.Options(s||{})),a(t,s.add(o),n)}}),define("can-arcgis@1.0.0#components/_common/assignGraphics",["exports","esri-promise"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return new Promise(function(t){(0,r.default)(["esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"]).then(function(r){var s=a(r,3),n=s[0],o=s[1],i=s[2];e.forEach(function(e){var t=void 0;switch(e.geometry.type){case"polyline":t=new o({color:"#de4343",width:"5px",style:"solid"});break;case"polygon":t=new i({color:"#de4343",style:"solid",outline:{color:"#000",width:1}});break;case"point":default:t=new n({color:"red",outline:{color:"#000",width:"0.5px"}})}e.symbol=t}),t(e)})})};var r=function(e){return e&&e.__esModule?e:{default:e}}(t),a=function(){function e(e,t){var r=[],a=!0,s=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),define("can-arcgis@1.0.0#components/select-widget/ViewModel",["exports","can-define/map/map","can-define/list/list","can-util/js/string/string","esri-promise","../_common/assignGraphics","../_common/decorateAccessor","can-reflect"],function(e,t,r,a,s,n,o,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var c=l(t),p=l(r),y=l(a),g=l(s),u=l(n),d=l(o),k=l(i),T=function(){function e(e,t){var r=[],a=!0,s=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=c.default.extend("SelectWidget",{seal:!1},{view:{set:function(e){var t=this;return this.view&&this.view.map.remove(this.selectGraphicsLayer),e&&(this.selectGraphicsLayer||(0,g.default)(["esri/layers/GraphicsLayer"]).then(function(r){var a=T(r,1)[0];t.selectGraphicsLayer=(0,d.default)(new a({listMode:"hide"})),e.map.add(t.selectGraphicsLayer)})),e}},title:{type:"string",value:"Select Features"},layerOptions:{get:function(){var e=this;return k.default.getOwnEnumerableKeys(this.layers).map(function(t){return{label:e.layers[t].label||t,value:t}})}},layerAlias:{value:"Layer to select"},layerProperties:{get:function(){return{options:this.layerOptions,alias:this.layerAlias}}},layers:c.default,layer:{type:"string",set:function(e){if(!e)return e;if(localStorage.selectedLayer=e,!this.layers[e])return e;var t=this.layers[e],r=this.view.map.findLayerById(t.supportId);return r&&r.sublayers.forEach(function(e){e.visible=t.supportIds.indexOf(e.id)>-1}),e}},selectedLayer:{get:function(){return this.layers[this.layer]||"custom"}},actions:p.default,query:{type:"string",value:"spatial"},queries:{get:function(){return(this.selectedLayer.queries||[]).concat([{value:"spatial",label:"From the map"}])}},queryProperties:{get:function(){return{options:this.queries,alias:"Select features by"}}},selectedQuery:{get:function(){var e=this,t=this.queries.filter(function(t){return t.value===e.query});return t.length?t[0]:{}}},queryFormObject:{Value:c.default},formIsSaving:"boolean",selectedFeatures:{Value:p.default},drawGraphicsLayer:{},selectGraphicsLayer:{},searchFormSubmit:function(e){var t=y.default.sub(this.selectedQuery.queryTemplate||"1=1",e);this.selectFeatures({where:t})},searchGraphics:function(){var e=this;if(this.activeButton=null,1===this.drawGraphicsLayer.graphics.items.length)this.selectFeatures({geometry:this.drawGraphicsLayer.graphics.getItemAt(0).geometry}),this.clearDrawing();else if(this.drawGraphicsLayer.graphics.items.length>1){var t=this.drawGraphicsLayer.graphics.map(function(e){return e.geometry}).toArray();(0,g.default)(["esri/geometry/geometryEngine"]).then(function(r){var a=T(r,1)[0].union(t);e.clearDrawing(),e.selectFeatures({geometry:a})})}},clearDrawing:function(){this.drawGraphicsLayer.graphics.removeAll()},clearSelected:function(){this.selectGraphicsLayer.graphics.removeAll(),this.drawGraphicsLayer.graphics.removeAll(),this.formIsSaving=!1},selectFeatures:function(e){var t=this;(0,g.default)(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(r){var a=T(r,2),s=a[0],n=a[1],o=Object.assign(new n,{outFields:["*"],returnGeometry:!0,outSpatialReference:t.view.spatialReference},e);new s({url:t.selectedLayer.url+"/query"}).execute(o).then(function(e){t.highlightFeatures(e.features),t.selectedFeatures.replace(e.features.map(function(e){return e.attributes})),t.selectedFeatures.length&&t.view.goTo(e.features),t.formIsSaving=!1}).otherwise(function(e){console.log(e)})})},highlightFeatures:function(e){var t=this;e.length&&(0,u.default)(e).then(function(e){t.drawGraphicsLayer.removeAll(),t.selectGraphicsLayer.addMany(e)})},onActionClick:function(e){return e.onClick(this.selectGraphicsLayer.graphics,this),!1}})}),define("can-arcgis@1.0.0#components/select-widget/select-widget",["exports","can-component","./template.stache","./ViewModel","../draw-widget/draw-widget","can-admin/components/form-widget/form-widget","can-admin/components/form-widget/field-components/select-field/select-field"],function(e,t,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(t),o=s(r),i=s(a);e.default=n.default.extend({tag:"select-widget",ViewModel:i.default,view:o.default})}),define("can-arcgis@1.0.0#config/select/select",["exports","can-stache","sweetalert2","../../components/select-widget/select-widget","can-admin/components/form-widget/field-components/text-field/text-field","sweetalert2/dist/sweetalert2.css"],function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(t),n=a(r),o="https://services1.arcgis.com/6bXbLtkf4y11TosO/arcgis/rest/services/Restaurants/FeatureServer/0";e.default={debug:!0,viewOptions:{center:[-93.28697204589844,44.294471740722656],zoom:12},mapOptions:{basemap:"gray",layers:[{type:"feature",options:{url:o,id:"resteraunts",outFields:["*"]}}]},widgets:[{parent:"expand",iconClass:"esri-icon-search",type:"renderer",renderer:(0,s.default)('<select-widget \n            layers:from="layers"\n            view:from="view"\n            actions:from="actions" />'),options:{layers:{Resteraunts:{url:o,queries:[{value:"name",label:"Establishment Name",fields:["name"],queryTemplate:"EstablishmentName LIKE '%{name}%'"},{value:"riskType",label:"Risk Type",queryTemplate:"RiskType = {risk}",fields:[{name:"risk",alias:"Risk Type",fieldType:"select",options:[{value:1,label:"Inspected one time per year"},{value:2,label:"Inspected two times per year"},{value:3,label:"Inspected three times per year"}]}]}]}},actions:[{label:"Log Selected Features",iconClass:"esri-icon-announcement",onClick:function(e){(0,n.default)({title:"Features",html:e.map(function(e){return"<li>"+e.attributes.EstablishmentName+"</li>"}).join("")})}}]}}]}});
//# sourceMappingURL=select.js.map