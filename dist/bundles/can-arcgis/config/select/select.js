define("can-arcgis@1.0.0#components/select-widget/template.stache!steal-stache@3.1.3#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@3.2.5#can-view-import","can-stache-bindings@3.11.2#can-stache-bindings"],function(e,t,r){var a=t("components/select-widget/template.stache",[{tokenType:"start",args:["div",!1,1]},{tokenType:"attrStart",args:["class",1]},{tokenType:"attrValue",args:["workorder-picker container",1]},{tokenType:"attrEnd",args:["class",1]},{tokenType:"attrStart",args:["style",1]},{tokenType:"attrValue",args:["background:#fff;width:300px;padding:10px;",1]},{tokenType:"attrEnd",args:["style",1]},{tokenType:"end",args:["div",!1,2]},{tokenType:"chars",args:["\r\n    ",2]},{tokenType:"start",args:["p",!1,3]},{tokenType:"attrStart",args:["class",3]},{tokenType:"attrValue",args:["text-bold",3]},{tokenType:"attrEnd",args:["class",3]},{tokenType:"end",args:["p",!1,3]},{tokenType:"special",args:["title",3]},{tokenType:"close",args:["p",3]},{tokenType:"chars",args:["\r\n\r\n    ",3]},{tokenType:"special",args:["#if(selectedFeatures.length)",5]},{tokenType:"chars",args:["\r\n        ",5]},{tokenType:"start",args:["p",!1,6]},{tokenType:"end",args:["p",!1,6]},{tokenType:"chars",args:["You've selected ",6]},{tokenType:"special",args:["selectedFeatures.length",6]},{tokenType:"chars",args:[" features.\r\n            ",6]},{tokenType:"start",args:["button",!1,7]},{tokenType:"attrStart",args:["class",7]},{tokenType:"attrValue",args:["btn",7]},{tokenType:"attrEnd",args:["class",7]},{tokenType:"attrStart",args:["type",7]},{tokenType:"attrValue",args:["button",7]},{tokenType:"attrEnd",args:["type",7]},{tokenType:"attrStart",args:["on:el:click",7]},{tokenType:"attrValue",args:["clearSelected()",7]},{tokenType:"attrEnd",args:["on:el:click",7]},{tokenType:"end",args:["button",!1,7]},{tokenType:"chars",args:["Cancel",7]},{tokenType:"close",args:["button",7]},{tokenType:"chars",args:["\r\n        ",7]},{tokenType:"close",args:["p",8]},{tokenType:"chars",args:["\r\n        ",8]},{tokenType:"start",args:["ul",!1,9]},{tokenType:"attrStart",args:["class",9]},{tokenType:"attrValue",args:["menu",9]},{tokenType:"attrEnd",args:["class",9]},{tokenType:"end",args:["ul",!1,9]},{tokenType:"chars",args:["\r\n            ",9]},{tokenType:"comment",args:[" menu header text ",10]},{tokenType:"chars",args:["\r\n            ",10]},{tokenType:"start",args:["li",!0,11]},{tokenType:"attrStart",args:["class",11]},{tokenType:"attrValue",args:["divider",11]},{tokenType:"attrEnd",args:["class",11]},{tokenType:"attrStart",args:["data-content",11]},{tokenType:"attrValue",args:["Actions",11]},{tokenType:"attrEnd",args:["data-content",11]},{tokenType:"end",args:["li",!0,11]},{tokenType:"chars",args:["\r\n            ",11]},{tokenType:"comment",args:[" menu item ",12]},{tokenType:"chars",args:["\r\n            ",12]},{tokenType:"special",args:["#each(actions)",13]},{tokenType:"chars",args:["\r\n                ",13]},{tokenType:"start",args:["li",!1,14]},{tokenType:"attrStart",args:["class",14]},{tokenType:"attrValue",args:["menu-item",14]},{tokenType:"attrEnd",args:["class",14]},{tokenType:"end",args:["li",!1,14]},{tokenType:"chars",args:["\r\n                    ",14]},{tokenType:"start",args:["a",!1,15]},{tokenType:"attrStart",args:["href",15]},{tokenType:"attrValue",args:["#",15]},{tokenType:"attrEnd",args:["href",15]},{tokenType:"attrStart",args:["on:el:click",15]},{tokenType:"attrValue",args:["onActionClick(.)",15]},{tokenType:"attrEnd",args:["on:el:click",15]},{tokenType:"end",args:["a",!1,15]},{tokenType:"chars",args:["\r\n                        ",15]},{tokenType:"start",args:["i",!1,16]},{tokenType:"attrStart",args:["class",16]},{tokenType:"special",args:["iconClass",16]},{tokenType:"attrEnd",args:["class",16]},{tokenType:"end",args:["i",!1,16]},{tokenType:"close",args:["i",16]},{tokenType:"chars",args:[" ",16]},{tokenType:"special",args:["label",16]},{tokenType:"chars",args:["\r\n                    ",16]},{tokenType:"close",args:["a",17]},{tokenType:"chars",args:["\r\n                ",17]},{tokenType:"close",args:["li",18]},{tokenType:"chars",args:["\r\n            ",18]},{tokenType:"special",args:["/each",19]},{tokenType:"chars",args:["\r\n        ",19]},{tokenType:"close",args:["ul",20]},{tokenType:"chars",args:["\r\n    ",20]},{tokenType:"special",args:["else",21]},{tokenType:"chars",args:["\r\n\r\n        ",21]},{tokenType:"start",args:["select-field",!0,23]},{tokenType:"attrStart",args:["vm:properties:from",23]},{tokenType:"attrValue",args:["layerProperties",23]},{tokenType:"attrEnd",args:["vm:properties:from",23]},{tokenType:"attrStart",args:["vm:value:bind",23]},{tokenType:"attrValue",args:["layer",23]},{tokenType:"attrEnd",args:["vm:value:bind",23]},{tokenType:"end",args:["select-field",!0,23]},{tokenType:"chars",args:["\r\n\r\n        ",23]},{tokenType:"special",args:["#if(layer)",25]},{tokenType:"chars",args:["\r\n\r\n            ",25]},{tokenType:"start",args:["select-field",!0,27]},{tokenType:"attrStart",args:["vm:properties:from",27]},{tokenType:"attrValue",args:["queryProperties",27]},{tokenType:"attrEnd",args:["vm:properties:from",27]},{tokenType:"attrStart",args:["vm:value:bind",27]},{tokenType:"attrValue",args:["query",27]},{tokenType:"attrEnd",args:["vm:value:bind",27]},{tokenType:"end",args:["select-field",!0,29]},{tokenType:"chars",args:[" \r\n\r\n            ",29]},{tokenType:"special",args:["#if(query)",31]},{tokenType:"chars",args:["\r\n                ",31]},{tokenType:"special",args:["#eq(query, 'spatial')",32]},{tokenType:"chars",args:["\r\n                    ",32]},{tokenType:"start",args:["draw-widget",!0,33]},{tokenType:"attrStart",args:["view:from",33]},{tokenType:"attrValue",args:["view",33]},{tokenType:"attrEnd",args:["view:from",33]},{tokenType:"attrStart",args:["graphics:u:layer:bind",33]},{tokenType:"attrValue",args:["graphicsLayer",33]},{tokenType:"attrEnd",args:["graphics:u:layer:bind",33]},{tokenType:"end",args:["draw-widget",!0,35]},{tokenType:"chars",args:["\r\n                    \r\n                    ",35]},{tokenType:"special",args:["#if(graphicsLayer.graphics.items.length)",37]},{tokenType:"chars",args:["\r\n                        ",37]},{tokenType:"start",args:["button",!1,38]},{tokenType:"attrStart",args:["class",38]},{tokenType:"attrValue",args:["btn btn-primary",38]},{tokenType:"attrEnd",args:["class",38]},{tokenType:"attrStart",args:["on:el:click",38]},{tokenType:"attrValue",args:["searchGraphics",38]},{tokenType:"attrEnd",args:["on:el:click",38]},{tokenType:"end",args:["button",!1,38]},{tokenType:"chars",args:["\r\n                            ",38]},{tokenType:"start",args:["i",!1,39]},{tokenType:"attrStart",args:["class",39]},{tokenType:"attrValue",args:["esri-icon-search",39]},{tokenType:"attrEnd",args:["class",39]},{tokenType:"end",args:["i",!1,39]},{tokenType:"close",args:["i",39]},{tokenType:"chars",args:[" Search",39]},{tokenType:"close",args:["button",39]},{tokenType:"chars",args:[" \r\n                    ",39]},{tokenType:"special",args:["/if",40]},{tokenType:"chars",args:["\r\n                ",40]},{tokenType:"special",args:["else",41]},{tokenType:"chars",args:["\r\n                    ",41]},{tokenType:"start",args:["form-widget",!0,42]},{tokenType:"attrStart",args:["vm:is:u:saving:bind",42]},{tokenType:"attrValue",args:["formIsSaving",42]},{tokenType:"attrEnd",args:["vm:is:u:saving:bind",42]},{tokenType:"attrStart",args:["vm:fields:from",42]},{tokenType:"attrValue",args:["selectedQuery.fields",42]},{tokenType:"attrEnd",args:["vm:fields:from",42]},{tokenType:"attrStart",args:["vm:form:u:object:from",42]},{tokenType:"attrValue",args:["queryFormObject",42]},{tokenType:"attrEnd",args:["vm:form:u:object:from",42]},{tokenType:"attrStart",args:["on:vm:submit",42]},{tokenType:"attrValue",args:["searchFormSubmit(queryFormObject)",42]},{tokenType:"attrEnd",args:["on:vm:submit",42]},{tokenType:"attrStart",args:["on:vm:cancel",42]},{tokenType:"attrValue",args:["reset",42]},{tokenType:"attrEnd",args:["on:vm:cancel",42]},{tokenType:"end",args:["form-widget",!0,47]},{tokenType:"chars",args:["\r\n                ",47]},{tokenType:"special",args:["/eq",48]},{tokenType:"chars",args:["\r\n            ",48]},{tokenType:"special",args:["/if",49]},{tokenType:"chars",args:["\r\n        ",49]},{tokenType:"special",args:["/if",50]},{tokenType:"chars",args:["\r\n    ",50]},{tokenType:"special",args:["/if",51]},{tokenType:"chars",args:["\r\n",51]},{tokenType:"close",args:["div",52]},{tokenType:"done",args:[52]}]);return function(t,s,n){var o={module:e};return s instanceof r.Options||(s=new r.Options(s||{})),a(t,s.add(o),n)}}),define("can-arcgis@1.0.0#components/_common/assignGraphics",["exports","esri-promise"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return new Promise(function(t){(0,r.default)(["esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"]).then(function(r){var s=a(r,3),n=s[0],o=s[1],i=s[2];e.forEach(function(e){var t=void 0;switch(e.geometry.type){case"polyline":t=new o({color:"#de4343",width:"5px",style:"solid"});break;case"polygon":t=new i({color:"#de4343",style:"solid",outline:{color:"#000",width:1}});break;case"point":default:t=new n({color:"red",outline:{color:"#000",width:"0.5px"}})}e.symbol=t}),t(e)})})};var r=function(e){return e&&e.__esModule?e:{default:e}}(t),a=function(){function e(e,t){var r=[],a=!0,s=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),define("can-arcgis@1.0.0#components/select-widget/ViewModel",["exports","can-define/map/map","can-define/list/list","can-util/js/string/string","esri-promise","../_common/assignGraphics","can-reflect"],function(e,t,r,a,s,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var l=i(t),c=i(r),p=i(a),y=i(s),g=i(n),u=i(o),d=function(){function e(e,t){var r=[],a=!0,s=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=l.default.extend("SelectWidget",{seal:!1},{view:{},continueDraw:"boolean",title:{value:"Select Features"},layerOptions:{get:function(){var e=this;return u.default.getOwnEnumerableKeys(this.layers).map(function(t){return{label:e.layers[t].label||t,value:t}})}},layerAlias:{value:"Layer to select"},layerProperties:{get:function(){return{options:this.layerOptions,alias:this.layerAlias}}},layers:l.default,layer:{type:"string",set:function(e){if(!e)return e;if(localStorage.selectedLayer=e,!this.layers[e])return e;var t=this.layers[e],r=this.view.map.findLayerById(t.supportId);return r&&r.sublayers.forEach(function(e){e.visible=t.supportIds.indexOf(e.id)>-1}),e}},selectedLayer:{get:function(){return this.layers[this.layer]||"custom"}},actions:c.default,query:{type:"string",value:"spatial"},queries:{get:function(){return(this.selectedLayer.queries||[]).concat([{value:"spatial",label:"From the map"}])}},queryProperties:{get:function(){return{options:this.queries,alias:"Select features by"}}},selectedQuery:{get:function(){var e=this,t=this.queries.filter(function(t){return t.value===e.query});return t.length?t[0]:{}}},queryFormObject:{Value:l.default},formIsSaving:"boolean",selectedFeatures:{Value:c.default},graphicsLayer:{},searchFormSubmit:function(e){var t=p.default.sub(this.selectedQuery.queryTemplate||"1=1",e);this.selectFeatures({where:t})},searchGraphics:function(){var e=this;if(this.activeButton=null,1===this.graphicsLayer.graphics.items.length)this.selectFeatures({geometry:this.graphicsLayer.graphics.getItemAt(0).geometry}),this.clearGraphics();else if(this.graphicsLayer.graphics.items.length>1){var t=this.graphicsLayer.graphics.map(function(e){return e.geometry}).toArray();(0,y.default)(["esri/geometry/geometryEngine"]).then(function(r){var a=d(r,1)[0].union(t);e.clearGraphics(),e.selectFeatures({geometry:a})})}},clearGraphics:function(){this.graphicsLayer.graphics.removeAll()},clearSelected:function(){this.selectedFeatures.replace([]),this.graphicsLayer.graphics.removeAll(),this.formIsSaving=!1},selectFeatures:function(e){var t=this;(0,y.default)(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(r){var a=d(r,2),s=a[0],n=a[1],o=Object.assign(new n,{outFields:["*"],returnGeometry:!0,outSpatialReference:t.view.spatialReference},e);new s({url:t.selectedLayer.url+"/query"}).execute(o).then(function(e){t.highlightFeatures(e.features),t.selectedFeatures.replace(e.features.map(function(e){return e.attributes})),t.selectedFeatures.length&&t.view.goTo(e.features),t.formIsSaving=!1}).otherwise(function(e){console.log(e)})})},highlightFeatures:function(e){var t=this;e.length&&(0,g.default)(e).then(function(e){t.graphicsLayer.removeAll(),t.graphicsLayer.addMany(e)})},onActionClick:function(e){return e.onClick(this),!1}})}),define("can-arcgis@1.0.0#components/select-widget/select-widget",["exports","can-component","./template.stache","./ViewModel","../draw-widget/draw-widget","can-admin/components/form-widget/form-widget","can-admin/components/form-widget/field-components/select-field/select-field"],function(e,t,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(t),o=s(r),i=s(a);e.default=n.default.extend({tag:"select-widget",ViewModel:i.default,view:o.default})}),define("can-arcgis@1.0.0#config/select/select",["exports","can-stache","../../components/select-widget/select-widget","can-admin/components/form-widget/field-components/text-field/text-field"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(t),a="https://services1.arcgis.com/6bXbLtkf4y11TosO/arcgis/rest/services/Restaurants/FeatureServer/0";e.default={debug:!0,viewOptions:{center:[-93.28697204589844,44.294471740722656],zoom:12},mapOptions:{basemap:"gray",layers:[{type:"feature",options:{url:a,id:"resteraunts",outFields:["*"]}}]},widgets:[{parent:"expand",iconClass:"esri-icon-search",type:"renderer",renderer:(0,r.default)('<select-widget \n            layers:from="layers"\n            view:from="view"\n            actions:from="actions" />'),options:{layers:{Resteraunts:{url:a,queries:[{value:"name",label:"Establishment Name",fields:["name"],queryTemplate:"EstablishmentName LIKE '%{name}%'"},{value:"riskType",label:"Risk Type",queryTemplate:"RiskType = {risk}",fields:[{name:"risk",alias:"Risk Type",fieldType:"select",options:[{value:1,label:"Inspected one time per year"},{value:2,label:"Inspected two times per year"},{value:3,label:"Inspected three times per year"}]}]}]}},actions:[{label:"Log Selected Features",iconClass:"esri-icon-announcement",onClick:function(e){var t=e.graphicsLayer.graphics.toArray(),r=e.selectedFeatures;console.log(t,r),alert("Check your browser console for feature information")}}]}}]}});
//# sourceMappingURL=select.js.map